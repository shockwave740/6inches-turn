<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="3{%z)Go3-]iss:Oq_2C=">moving</variable><variable id="mtD*afl_3E)xX`tk*x|5">duration</variable><variable id="4b%KJXU]Lh%jGYa/WInx">distance</variable><variable id="Dqs-8XxF3d/eJP6,StDK">dist</variable></variables><comment id="oWsXi3KoWDjc289a0;;o" x="658" y="730" w="160" h="120">
Checklist:
</comment><comment id="VMbYnb%,v#$kV*so7Go;" x="863" y="730" w="480" h="120">
1. Define motor control functions (A and B, forward, backward, stop).
</comment><comment id="Y|v~Q,!dMdoMqTHc+UG*" x="1388" y="730" w="470" h="120">
2. Define ultrasonic distance function (in cm).
</comment><comment id="tO*dx^r?@Y^9mn?E-hI0" x="1903" y="730" w="480" h="120">
3. Keep a state variable for "moving" vs "stopped".
</comment><comment id="O`{+6]doVhUO`2P$!*h0" x="0" y="1272" w="480" h="120">
4. If moving and obstacle &lt; 15cm (~6in), turn right briefly, then continue forward.
</comment><comment id="B(czyz|f[05dQU*06y:z" x="525" y="1272" w="320" h="120">
5. If stopped, ignore obstacles.
</comment><block type="device_button_event" id="^ST{oKnfY31:{lMqTmBD" x="0" y="0"><field name="NAME">Button.A</field><comment pinned="false" h="80" w="160">--- Button A starts forward motion ---</comment><statement name="HANDLER"><block type="function_call" id="q@|uI8dac%mmGpSZcLfx"><mutation name="motors_forward" functionid="N@,;*T7vCbMPejBAPi,)"></mutation></block></statement></block><block type="device_button_event" id="cnuUfo6NFv1`MAl%PZ2q" x="288" y="0"><field name="NAME">Button.B</field><comment pinned="false" h="80" w="160">--- Button B stops motors ---</comment><statement name="HANDLER"><block type="function_call" id="x[4qMBAwTxEu~xTVc@GU"><mutation name="motors_stop" functionid="0[ZRzrc^w2BZ+CFYYUgr"></mutation></block></statement></block><block type="device_forever" id=":(z=1Tj4b^7*CFWM*_,q" x="575" y="0"><comment pinned="false" h="80" w="160">--- Main loop ---</comment><statement name="HANDLER"><block type="variables_set" id="Hlw@15o|MNBOCvNv=SK4"><field name="VAR" id="Dqs-8XxF3d/eJP6,StDK">dist</field><value name="VALUE"><shadow type="math_number" id="6}4kfRa~bxD{EYE:`0:J"><field name="NUM">0</field></shadow><block type="function_call_output" id="p@bzJ5wq85WZ6FmBZ]+a"><mutation name="getDistanceCm" functionid="5?KK6#m9+Fa.+I+I]{t^"></mutation></block></value><next><block type="controls_if" id="O=:VnM):3(4h*wt]G|%U"><value name="IF0"><shadow type="logic_boolean" id=";T8WQXYjufE6(8W}*zAw"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="tR!l_Q_un`!5LvXXq4/p"><field name="VAR" id="3{%z)Go3-]iss:Oq_2C=">moving</field></block></value><statement name="DO0"><block type="controls_if" id="b}+aSROEtp2}@LiMAw(T"><value name="IF0"><shadow type="logic_boolean" id="84w|]A1+mTh(%wMf9NT/"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="$ybQHAei-r}?R^GzKU$^"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="}jU4~4KAF?YZFK?Fh`nx"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="Rxzvg*Zzh`o1?)AT;Otp"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="x_|*(3)Tc4zTBzQd^~eC"><field name="NUM">0</field></shadow><block type="variables_get" id="Kt#it#+9O;{|5;Md(|F)"><field name="VAR" id="Dqs-8XxF3d/eJP6,StDK">dist</field></block></value><value name="B"><shadow type="math_number" id="[`89|Hfr^m^(DE5j:aLk"><field name="NUM">0</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="O~6bVpyZTi{IH)`m?9u7"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="9G71A4;L[_MWtW@C,xu:"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="f6NFEm!#oB8b[Wyl}BhD"><field name="NUM">0</field></shadow><block type="variables_get" id="rZ-xB:RS$Le`(3=~hL+%"><field name="VAR" id="Dqs-8XxF3d/eJP6,StDK">dist</field></block></value><value name="B"><shadow type="math_number" id="ee~V$p`~TaW!Eg0#X/9,"><field name="NUM">15</field></shadow></value></block></value></block></value><statement name="DO0"><block type="function_call" id="W)TxTADjHTC]f#GrsS3Q"><mutation name="motors_turnRight" functionid="1]Tetz:a.E)lC;cT6Vd-"></mutation><comment pinned="false" h="80" w="160">obstacle within 15 cm (~6 in)</comment><next><block type="function_call" id="}R=ND6JCxF=q%/0lO*=m"><mutation name="motors_forward" functionid="N@,;*T7vCbMPejBAPi,)"></mutation></block></next></block></statement></block></statement></block></next></block></statement></block><block type="function_definition" id="GB#/]yK|^Y5xVV)oKd:B" x="1303" y="0"><mutation name="motorA_cw" functionid="G2;s1~~@,}LS+87q:iXx"></mutation><field name="function_name">motorA_cw</field><comment pinned="false" h="80" w="160">--- Motor functions ---</comment><statement name="STACK"><block type="device_set_digital_pin" id="e^#[;b)^dM){;+y(.IqD"><value name="name"><shadow type="digital_pin_shadow" id="zD}|k#-fT,/0)16TM,vM"><field name="pin">DigitalPin.P0</field></shadow></value><value name="value"><shadow type="math_number_minmax" id="DgyZ/hr4rxw,w56KGgi;"><mutation min="0" max="1" precision="0"></mutation><field name="SLIDER">1</field></shadow></value><next><block type="device_set_digital_pin" id="my4[gKOtb6~E:).ot{|,"><value name="name"><shadow type="digital_pin_shadow" id="??o@@BWV.xQ(sx`Uz:*i"><field name="pin">DigitalPin.P1</field></shadow></value><value name="value"><shadow type="math_number_minmax" id="J3tf`t`h{(olRcX4i]x="><mutation min="0" max="1" precision="0"></mutation><field name="SLIDER">0</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="S0RqQuaz|glY0L98Z/Ob" x="1672" y="0"><mutation name="motorA_ccw" functionid="sW9@S`1z$IYKOYu!UPc{"></mutation><field name="function_name">motorA_ccw</field><statement name="STACK"><block type="device_set_digital_pin" id="}PIXpOvQJ1VxAqZBO|Fl"><value name="name"><shadow type="digital_pin_shadow" id=".[hPGJZF:PVvn)Afa~wr"><field name="pin">DigitalPin.P0</field></shadow></value><value name="value"><shadow type="math_number_minmax" id="+].qr#l}4$Os*CDJx9f`"><mutation min="0" max="1" precision="0"></mutation><field name="SLIDER">0</field></shadow></value><next><block type="device_set_digital_pin" id="0*FmR]{9g0{j6se[e/CV"><value name="name"><shadow type="digital_pin_shadow" id=")o~hAh-tIXA~dha8.fH3"><field name="pin">DigitalPin.P1</field></shadow></value><value name="value"><shadow type="math_number_minmax" id=".9FC!tA:R#}J-1[@_%`k"><mutation min="0" max="1" precision="0"></mutation><field name="SLIDER">1</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="S3%Npz!a]ovj6u~#W@1o" x="2041" y="0"><mutation name="motorA_stop" functionid=";*#%IW(GfX2xqQvlWb1."></mutation><field name="function_name">motorA_stop</field><statement name="STACK"><block type="device_set_digital_pin" id="Xe0aAsKDrvFk7wWW)cBe"><value name="name"><shadow type="digital_pin_shadow" id="3);:83oDZgJGLRhtP4zV"><field name="pin">DigitalPin.P0</field></shadow></value><value name="value"><shadow type="math_number_minmax" id="Ri8:OW-.k_|w4NfP_j+N"><mutation min="0" max="1" precision="0"></mutation><field name="SLIDER">0</field></shadow></value><next><block type="device_set_digital_pin" id="z@(W_c6BYfND=k+Gq/4("><value name="name"><shadow type="digital_pin_shadow" id="68rM(ATe[#:d33x|]EWm"><field name="pin">DigitalPin.P1</field></shadow></value><value name="value"><shadow type="math_number_minmax" id="b/}0hF8IYppjeTbOYygs"><mutation min="0" max="1" precision="0"></mutation><field name="SLIDER">0</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="5S7)b*[K+u/~@iN1[nG%" x="0" y="445"><mutation name="motorB_cw" functionid="(~(:HpX1yF2sBEZeYTtN"></mutation><field name="function_name">motorB_cw</field><statement name="STACK"><block type="device_set_digital_pin" id="r7:?(q?$ruRfP,+}:9K."><value name="name"><shadow type="digital_pin_shadow" id="[a6X)%1id@/P{9Z13b*."><field name="pin">DigitalPin.P2</field></shadow></value><value name="value"><shadow type="math_number_minmax" id="zvM;Y3:#@-h_wrqw(H/0"><mutation min="0" max="1" precision="0"></mutation><field name="SLIDER">1</field></shadow></value><next><block type="device_set_digital_pin" id="x/2b)j+[(aBCRuNmw1KL"><value name="name"><shadow type="digital_pin_shadow" id="9eIiVtSu=SB}F|:gP]Z+"><field name="pin">DigitalPin.P3</field></shadow></value><value name="value"><shadow type="math_number_minmax" id="k3aDbj![oa6xe+[~(_qw"><mutation min="0" max="1" precision="0"></mutation><field name="SLIDER">0</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="AY)l-6i[=Iz6Ax^bvqea" x="369" y="445"><mutation name="motorB_ccw" functionid="q%wdpXlJ8PLhDbaeO}ak"></mutation><field name="function_name">motorB_ccw</field><statement name="STACK"><block type="device_set_digital_pin" id="0b7[Q|3UFv#]!iQ?h3eg"><value name="name"><shadow type="digital_pin_shadow" id="TeqWr(PKyB=W.~uOcS|x"><field name="pin">DigitalPin.P2</field></shadow></value><value name="value"><shadow type="math_number_minmax" id="49J/EhP8/0Q6HLYrTaOj"><mutation min="0" max="1" precision="0"></mutation><field name="SLIDER">0</field></shadow></value><next><block type="device_set_digital_pin" id="#6!6m%a`CbgX3YMutY@w"><value name="name"><shadow type="digital_pin_shadow" id="nBrlUhy*qr!q{aa/V+Z,"><field name="pin">DigitalPin.P3</field></shadow></value><value name="value"><shadow type="math_number_minmax" id="RzqV_PP!H*o3u$YFZ{r)"><mutation min="0" max="1" precision="0"></mutation><field name="SLIDER">1</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="YPp1~}U4DxK*{0oncuC-" x="738" y="445"><mutation name="motorB_stop" functionid="QV%~Vm9(C4!trdSdN~Bv"></mutation><field name="function_name">motorB_stop</field><statement name="STACK"><block type="device_set_digital_pin" id="LR:M{SJ$h_U!r]`0Qnnf"><value name="name"><shadow type="digital_pin_shadow" id="Ur(PKA*KW,c@iaRrKMwY"><field name="pin">DigitalPin.P2</field></shadow></value><value name="value"><shadow type="math_number_minmax" id="@^6;U5Iv7yJ^;aokiZ`("><mutation min="0" max="1" precision="0"></mutation><field name="SLIDER">0</field></shadow></value><next><block type="device_set_digital_pin" id="R4JpFQ~CHl!0Gh5~u5gT"><value name="name"><shadow type="digital_pin_shadow" id="q}_~1|E,^/Ip@:MK)AO{"><field name="pin">DigitalPin.P3</field></shadow></value><value name="value"><shadow type="math_number_minmax" id="!p+j|80)GX(R711sZ{1*"><mutation min="0" max="1" precision="0"></mutation><field name="SLIDER">0</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="b]nxr3hBmmH{-SAX83LJ" x="1107" y="445"><mutation name="motors_forward" functionid="N@,;*T7vCbMPejBAPi,)"></mutation><field name="function_name">motors_forward</field><statement name="STACK"><block type="function_call" id="u8E?LMFcv`[|w}?iM8Ch"><mutation name="motorA_cw" functionid="G2;s1~~@,}LS+87q:iXx"></mutation><next><block type="function_call" id=":hKj15.q}+/XK56V=MqN"><mutation name="motorB_ccw" functionid="q%wdpXlJ8PLhDbaeO}ak"></mutation><next><block type="variables_set" id="}z98O~#~)?X@.{3FQsHN"><field name="VAR" id="3{%z)Go3-]iss:Oq_2C=">moving</field><value name="VALUE"><shadow type="math_number" id="XXY|,?~,|g=YJt:6azkz"><field name="NUM">0</field></shadow><block type="logic_boolean" id="?m_^q^_E/p_Lv4y[0){/"><field name="BOOL">TRUE</field></block></value></block></next></block></next></block></statement></block><block type="function_definition" id="QEzef)c+S,Jm?U}^stgY" x="1457" y="445"><mutation name="motors_stop" functionid="0[ZRzrc^w2BZ+CFYYUgr"></mutation><field name="function_name">motors_stop</field><statement name="STACK"><block type="function_call" id="Evw:jcC-Llc*vYZ)Znny"><mutation name="motorA_stop" functionid=";*#%IW(GfX2xqQvlWb1."></mutation><next><block type="function_call" id="NEvln$k@!TM23@;06J~B"><mutation name="motorB_stop" functionid="QV%~Vm9(C4!trdSdN~Bv"></mutation><next><block type="variables_set" id="Lji|;YP3G-s%wlNAC|`T"><field name="VAR" id="3{%z)Go3-]iss:Oq_2C=">moving</field><value name="VALUE"><shadow type="math_number" id="h70*OWJ$dt[E0)U.8)8."><field name="NUM">0</field></shadow><block type="logic_boolean" id="ymeqDSA{J?9n~X1=0E[m"><field name="BOOL">FALSE</field></block></value></block></next></block></next></block></statement></block><block type="function_definition" id="Z`KP~CTr1%p:es(.Zpoi" x="1817" y="445"><mutation name="motors_turnRight" functionid="1]Tetz:a.E)lC;cT6Vd-"></mutation><field name="function_name">motors_turnRight</field><statement name="STACK"><block type="function_call" id="]dTS?[4c@GxEttBWM]Ck"><mutation name="motorA_cw" functionid="G2;s1~~@,}LS+87q:iXx"></mutation><comment pinned="false" h="80" w="160">A forward, B forward = spin right in place</comment><next><block type="function_call" id="A6GIn/::9rc5$0}*[L`G"><mutation name="motorB_cw" functionid="(~(:HpX1yF2sBEZeYTtN"></mutation><next><block type="device_pause" id="RX;BoPa6x!@[RdX3wLY?"><comment pinned="false" h="80" w="160">adjust turn duration</comment><value name="pause"><shadow type="timePicker" id="(,D~9#Fm2LBJ9bJ(A(%o"><field name="ms">500</field></shadow></value></block></next></block></next></block></statement></block><block type="function_definition" id="i}L%1k.oe-.^m//k4RA~" x="0" y="731"><mutation name="getDistanceCm" functionid="5?KK6#m9+Fa.+I+I]{t^"></mutation><field name="function_name">getDistanceCm</field><comment pinned="false" h="80" w="160">--- Ultrasonic distance (HC-SR04) ---</comment><statement name="STACK"><block type="device_set_digital_pin" id="Lb8xmye2#y{rqS)W1tWR"><comment pinned="false" h="80" w="160">Send trigger pulse</comment><value name="name"><shadow type="digital_pin_shadow" id="Sl#@m[BgsiuXcu5`kLJY"><field name="pin">DigitalPin.P8</field></shadow></value><value name="value"><shadow type="math_number_minmax" id="fGstp[_6*NVGMDc?[gT."><mutation min="0" max="1" precision="0"></mutation><field name="SLIDER">0</field></shadow></value><next><block type="control_wait_us" id=";(GuJwVJ8cd1ivFxJ(4`"><value name="micros"><shadow type="math_number_minmax" id="?$Rl7IqSPc{zphlq[~^F"><mutation min="0" max="6000" precision="0"></mutation><field name="SLIDER">2</field></shadow></value><next><block type="device_set_digital_pin" id=",u@AyRs-~GN8bsVD%wOO"><value name="name"><shadow type="digital_pin_shadow" id="wzHYYne%NpG!nf*x8h#T"><field name="pin">DigitalPin.P8</field></shadow></value><value name="value"><shadow type="math_number_minmax" id="vwKQ]eyUYNPVR{-$fNXE"><mutation min="0" max="1" precision="0"></mutation><field name="SLIDER">1</field></shadow></value><next><block type="control_wait_us" id="#qSCVe=o1D(9oC2j-2Ab"><value name="micros"><shadow type="math_number_minmax" id="ImI$RO!0|Jy~5#t/i67Y"><mutation min="0" max="6000" precision="0"></mutation><field name="SLIDER">10</field></shadow></value><next><block type="device_set_digital_pin" id="EAi!k,wdb$ZiJ6.~Kan."><value name="name"><shadow type="digital_pin_shadow" id="RrlbKPdp(*jRwa%bRANa"><field name="pin">DigitalPin.P8</field></shadow></value><value name="value"><shadow type="math_number_minmax" id="]S]s`#H#8UHU1LreH=W_"><mutation min="0" max="1" precision="0"></mutation><field name="SLIDER">0</field></shadow></value><next><block type="variables_set" id="S?Qz@Bb=]9CDMsK@AlRr"><field name="VAR" id="mtD*afl_3E)xX`tk*x|5">duration</field><comment pinned="false" h="80" w="160">Measure echo pulse</comment><value name="VALUE"><shadow type="math_number" id="Rny{rkXotDqTp*?x4V;v"><field name="NUM">0</field></shadow><block type="pins_pulse_in" id="byn3UcK9xlUHtQqf}pv,"><field name="value">PulseValue.High</field><value name="name"><shadow type="digital_pin_shadow" id="Sv2V*#?:7lE4NwJ;Ck_s"><field name="pin">DigitalPin.P9</field></shadow></value></block></value><next><block type="variables_set" id="hLz0hNtGJw[[8HY=G:]X"><field name="VAR" id="4b%KJXU]Lh%jGYa/WInx">distance</field><comment pinned="false" h="80" w="160">convert µs to cm</comment><value name="VALUE"><shadow type="math_number" id="o39IjZo`)l-[|n^wHE`q"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="S`LQJ*0|hyVZ9nB7$5Fe"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="Qo#Blfmv1t,aRFTTsLV;"><field name="NUM">0</field></shadow><block type="variables_get" id="Y*Q_19d^_PXi}l)9%dMp"><field name="VAR" id="mtD*afl_3E)xX`tk*x|5">duration</field></block></value><value name="B"><shadow type="math_number" id="Z0_b_GHT?4a#ogK[S-S~"><field name="NUM">58</field></shadow></value></block></value><next><block type="function_return" id="Jo({i3/6R(Z}[yD$$Rd)"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id=":3Y!TT8FK4mBOZmp;St4"><field name="NUM">0</field></shadow><block type="variables_get" id="AYkntzJ[1QV6P68vPQja"><field name="VAR" id="4b%KJXU]Lh%jGYa/WInx">distance</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>